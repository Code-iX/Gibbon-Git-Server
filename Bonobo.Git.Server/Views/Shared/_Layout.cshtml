<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <link rel="shortcut icon" href="~/favicon.ico" type="image/x-icon" />
    <title>@ViewBag.Title</title>
    @Styles.Render("~/Content/css")
    <!--[if lte IE 7]><link rel="stylesheet" href="~/Content/Msie.css" type="text/css" media="screen,projection" /><![endif]-->
</head>
<body>
    <div class="page" id="@ViewContext.ViewData["PageID"]">
        <div id="header">
            <div id="title">
                <h1>@Html.ActionLink(Resources.Layout_Title, "", "")</h1>
            </div>
            <div id="topMenu">
                <div id="accountInfo">
                    @if (Request.IsAuthenticated)
                    {
                        if (!WindowsActionFilterAttribute.IsWindowsModeActive)
                        {
                            <p><strong>@Context.User.Identity.Name</strong> [ @Html.ActionLink(Resources.Layout_AccountSettings, "Edit", "Account", new { id = UsernameUrl.Encode(User.Identity.Name.ToLowerInvariant()) }, null) | @Html.ActionLink(Resources.Layout_LogOff, "LogOff", "Home") ]</p>
                        }
                        else
                        {
                            <p><strong>@Context.User.Identity.Name</strong> [ @Html.ActionLink(Resources.Layout_AccountSettings, "Edit", "Account", new { id = UsernameUrl.Encode(User.Identity.Name.ToLowerInvariant()) }, null) ]</p>
                        }
                    }
                    else
                    {
                        if (UserConfiguration.Current.AllowAnonymousRegistration)
                        {
                            <p>[ @Html.ActionLink(Resources.Layout_LogOn, "LogOn", "Home") | @Html.ActionLink(Resources.Layout_Register, "Create", "Account")]</p>
                        }
                        else
                        {
                            <p>[ @Html.ActionLink(Resources.Layout_LogOn, "LogOn", "Home") ]</p>
                        }
                    }
                </div>
            </div>
        </div>
        <div class="window">
            <div id="main">
                <div class="clearfix">
                    <div id="menu">
                        @if (Request.IsAuthenticated)
                        {
                            <ul>
                                <li>@Html.ActionLink(Resources.Layout_Repositories, "Index", "Repository")</li>
                                <li>@Html.ActionLink(Resources.Layout_About, "About", "Home")</li>
                            </ul>
                        }
                        @if (User.IsInRole(Definitions.Roles.Administrator))
                        {
                            <h3>@Resources.Layout_Administration</h3>
                            <ul>
                                <li>@Html.ActionLink(Resources.Layout_AdministrationUsers, "Index", "Account")</li>
                                <li>@Html.ActionLink(Resources.Layout_AdministrationTeams, "Index", "Team")</li>
                                <li>@Html.ActionLink(Resources.Layout_AdministrationGlobalSettings, "Index", "Settings")</li>
                            </ul>
                        }
                    </div>
                    <div id="content">
                        @RenderBody()
                    </div>
                </div>
                <div id="footer">
                    <p>&copy; 2013 <a href="http://www.chodounsky.net">Jakub Chodounský</a>. @Resources.Layout_Footer_Copyright</p>
                </div>
            </div>
        </div>
    </div>
    @Scripts.Render(
        "~/bundles/syntaxhighlighter",
        "~/bundles/jquery",
        "~/bundles/jqueryval")
    <script>SyntaxHighlighter.all();$('form.uniForm').uniform();</script>
</body>
</html>
